<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>WebSocket Chat</title>
    <script src="http://www.google.com/jsapi"></script>
    <script>google.load("jquery", "1.3")</script>
    <script>
      function getParameterByName(name) {
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
            results = regex.exec(location.search);
        return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
      };

function send(type, obj){
  ws.send(JSON.stringify({type: type, id: ID , state: obj }));
}

var ID = getParameterByName("id") || Math.round(Math.rand()*100000);

var ws = new WebSocket( "ws://localhost:8080/", "test-protocol" );

ws.onmessage = function(e) {
  var x = JSON.parse(e.data);
  console.log(x);
  e = x;
  if(e.type == "forward"){
  }
};

ws.onopen = function(e) {	
  console.log("connected" + e);	
  send('init');
};




</script>
</head>
<body style="margin:0px; padding:0px;overflow:hidden;">
</body>
</html>
